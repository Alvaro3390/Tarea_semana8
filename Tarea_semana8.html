<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Productos y Clientes</title>
    <script>
        // Validación de formulario para productos
        function validarProducto() {
            let nombre = document.getElementById("nombre_producto").value;
            let descripcion = document.getElementById("descripcion_producto").value;
            let precio = document.getElementById("precio_producto").value;
            let stock = document.getElementById("stock_producto").value;

            if (nombre === "" || descripcion === "" || precio <= 0 || stock <= 0) {
                alert("Todos los campos del formulario de productos deben ser válidos.");
                return false;
            }
            return true;
        }

        // Validación de formulario para clientes
        function validarCliente() {
            let nombre = document.getElementById("nombre_cliente").value;
            let email = document.getElementById("email_cliente").value;
            let direccion = document.getElementById("direccion_cliente").value;

            if (nombre === "" || email === "" || direccion === "") {
                alert("Todos los campos del formulario de clientes deben ser completados.");
                return false;
            }
            return true;
        }

        // Carrito de compras
        let carrito = [];

        // Agregar producto al carrito
        function agregarAlCarrito(id, nombre, precio) {
            // Verificar si el producto ya está en el carrito
            let productoExistente = carrito.find(producto => producto.id === id);
            if (productoExistente) {
                productoExistente.cantidad += 1; // Incrementar cantidad
            } else {
                carrito.push({ id, nombre, precio, cantidad: 1 }); // Nuevo producto
            }
            mostrarCarrito();
        }

        // Mostrar productos en el carrito
        function mostrarCarrito() {
            let carritoHTML = document.getElementById("carrito");
            carritoHTML.innerHTML = ""; // Limpiar contenido previo
            let total = 0;

            carrito.forEach(producto => {
                let fila = `<li>${producto.nombre} - $${producto.precio} x ${producto.cantidad}</li>`;
                carritoHTML.innerHTML += fila;
                total += producto.precio * producto.cantidad;
            });

            carritoHTML.innerHTML += `<strong>Total: $${total.toFixed(2)}</strong>`;
        }
    </script>
</head>
<body>
    <h1>Gestión de Productos y Clientes</h1>

    <!-- Formulario para insertar productos -->
    <h2>Agregar Producto</h2>
    <form action="insertar_producto.php" method="POST" onsubmit="return validarProducto();">
        <label for="nombre_producto">Nombre del Producto:</label>
        <input type="text" id="nombre_producto" name="nombre_producto" required><br>

        <label for="descripcion_producto">Descripción:</label>
        <input type="text" id="descripcion_producto" name="descripcion_producto" required><br>

        <label for="precio_producto">Precio:</label>
        <input type="number" id="precio_producto" name="precio_producto" step="0.01" required><br>

        <label for="stock_producto">Stock:</label>
        <input type="number" id="stock_producto" name="stock_producto" min="1" required><br>

        <button type="submit">Agregar Producto</button>
    </form>

    <!-- Formulario para insertar clientes -->
    <h2>Agregar Cliente</h2>
    <form action="insertar_cliente.php" method="POST" onsubmit="return validarCliente();">
        <label for="nombre_cliente">Nombre del Cliente:</label>
        <input type="text" id="nombre_cliente" name="nombre_cliente" required><br>

        <label for="email_cliente">Email:</label>
        <input type="email" id="email_cliente" name="email_cliente" required><br>

        <label for="direccion_cliente">Dirección:</label>
        <input type="text" id="direccion_cliente" name="direccion_cliente" required><br>

        <button type="submit">Agregar Cliente</button>
    </form>

    <!-- Listado de productos disponibles -->
    <h2>Productos Disponibles</h2>
    <div id="productos">
        <!-- Estos productos pueden ser generados dinámicamente desde PHP -->
        <ul>
            <li>
                Producto 1 - $10.00 
                <button onclick="agregarAlCarrito(1, 'Producto 1', 10.00)">Agregar al carrito</button>
            </li>
            <li>
                Producto 2 - $15.50 
                <button onclick="agregarAlCarrito(2, 'Producto 2', 15.50)">Agregar al carrito</button>
            </li>
            <li>
                Producto 3 - $7.25 
                <button onclick="agregarAlCarrito(3, 'Producto 3', 7.25)">Agregar al carrito</button>
            </li>
        </ul>
    </div>

    <!-- Carrito de compras -->
    <h2>Carrito de Compras</h2>
    <ul id="carrito"></ul>
</body>
</html>
